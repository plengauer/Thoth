if ! which python3; then exit 0; fi
. ./assert.sh

. otel.sh

assert_equals "hello world" "$(echo 'print("hello world")' | python3)"

pip3 install requests
echo '
import requests
requests.get("http://www.example.com/foo")
' | python3

exit 0

dir=$(mktemp -d)
python3 -m venv "$dir"/venv
. "$dir"/venv/bin/activate
pip install requests
echo '
import requests
requests.get("http://www.example.com/bar")
' | python
deactivate

dir=$(mktemp -d)
python3 -m venv "$dir"/venv
. "$dir"/venv/bin/activate
pip install requests
pip install opentelemetry-distro opentelemetry-exporter-otlp
opentelemetry-bootstrap -a
echo '
import requests
requests.get("http://www.example.com/baz")
' | opentelemetry-instrument python
deactivate
